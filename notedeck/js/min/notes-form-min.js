!function($){var o={notesFormWrapper:$(".nd-notes-wrapper"),notesForm:$(".nd-notes-form"),notesFormText:$(".nd-notes-content"),notesFormEmail:$(".nd-notes-email"),notesFormButton:$(".nd-notes-button"),notesCloseButton:$(".nd-notes-close"),notesSendButton:$(".nd-notes-send"),addNotesButton:$(".add-notes-button"),formActive:!1,init:function(){o.notesFormButton.on("click",function(){o.toggleForm()}),o.notesCloseButton.on("click",function(){o.toggleForm()}),o.notesForm.on("submit",function(t){t.preventDefault(),o.submitNotesForm($(this))}),o.addNotesButton.on("click",function(){var t=$(this);o.addNotes(t)})},addNotes:function(t){var e="\n \n"+t.siblings(".nd-text-content").text().trim()+"\n ----------------------------------------------------------- \n";o.notesFormText.val(o.notesFormText.val()+e),t.html("NOTES COPIED"),setTimeout(function(){t.html('<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> COPY TO NOTES')},3e3)},toggleForm:function(){o.removeErrors(),o.formActive?(o.notesFormWrapper.fadeOut(),$("body, html").removeClass("no-scroll")):(o.notesFormWrapper.fadeIn(),$("body, html").addClass("no-scroll")),o.formActive=!o.formActive},preventTouchScrolling:function(o){console.log(o.target.attr("class")),"nd-notes-content"!==o.target.attr("class")&&o.preventDefault()},removeErrors:function(){o.notesFormEmail.removeClass("error"),o.notesFormText.removeClass("error")},submitNotesForm:function(){o.removeErrors();var t=o.notesFormEmail.val(),e=o.notesFormText.val(),n=!1;""===t&&(o.notesFormEmail.addClass("error"),n=!0),""===e&&(o.notesFormText.addClass("error"),n=!0),n||(o.notesSendButton.prop("disabled",!0),o.notesSendButton.val("SENDING..."),$.ajax({method:"POST",url:"/wp-content/plugins/notedeck/ajax/email_handler.php",data:{email:t,content:e}}).done(function(t){o.handleSubmitedForm(t)}))},handleSubmitedForm:function(t){if(t)o.notesFormEmail.val(""),o.notesFormText.val(""),o.toggleForm();else{o.notesForm.before('<div class="email-failed alert alert-danger" role="alert"><strong>WARNING!</strong> An error occured while trying to send the email!</div>');var e=o.notesFormWrapper.find(".email-failed").hide().slideDown();setTimeout(function(){e.slideUp("fast",function(){e.remove()})},3e3)}o.notesSendButton.prop("disabled",!1),o.notesSendButton.val("SEND")}};o.init()}(jQuery);